{"ast":null,"code":"import React,{useEffect}from\"react\";import{Route,Switch}from\"react-router-dom\";import jwt_decode from\"jwt-decode\";import setAuthToken from\"../utils/setAuthToken\";import HomePage from\"./home/HomePage\";import Header from\"./common/Header\";import PageNotFound from\"./PageNotFound\";import Register from\"./register/Register\";import Login from\"./login/Login\";import ForgotPassword from'./forgot/Forgot';import News from\"./news/News\";import Wallet from\"./wallet/Wallet.js\";import ChangePassword from\"./changePassword/ChangePassword\";import PrivateRoute from\"./PrivateRoute\";import{ToastContainer}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{connect}from'react-redux';import{setCurrentUser,logOutUser}from\"../redux/actions/action\";import PasswordLess from'../components/changePassword/PasswordLess';import VerifyEmail from\"./verifyEmail/verifyEmail\";import Products from\"./products/products\";import Main from\"./MainLayout/Main\";import Dashboard from\"./dashboard/Dashboard\";import Orders from\"./orders/Orders\";import Transactions from\"./transactions.js/Transactions\";import Customers from\"./customers/Customers\";var App=function App(_ref){var setCurrentUser=_ref.setCurrentUser,logOutUser=_ref.logOutUser;useEffect(function(){if(localStorage.jwtToken){// Set auth token header auth\nvar token=localStorage.jwtToken;setAuthToken(token);// Decode token and get user info and exp\nvar decoded=jwt_decode(token);console.log(decoded);// Set user and isAuthenticated\nsetCurrentUser(decoded);// Check for expired token\nvar currentTime=Date.now()/1000;// to get in milliseconds\nif(decoded.exp<currentTime){console.log(\"true\");logOutUser();window.location.href=\"/login\";}}},[setCurrentUser,logOutUser]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:Login}),/*#__PURE__*/React.createElement(PrivateRoute,{path:\"/dashboard\",component:Dashboard}),/*#__PURE__*/React.createElement(PrivateRoute,{path:\"/customers\",component:Customers}),/*#__PURE__*/React.createElement(PrivateRoute,{path:\"/orders\",component:Orders}),/*#__PURE__*/React.createElement(PrivateRoute,{path:\"/wallet\",component:Transactions}),/*#__PURE__*/React.createElement(Route,{path:\"/login\",component:Login}),/*#__PURE__*/React.createElement(PrivateRoute,{exact:true,path:\"/products\",component:Products}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/passwordLess\",component:PasswordLess}),/*#__PURE__*/React.createElement(PrivateRoute,{exact:true,path:\"/changePassword\",component:ChangePassword}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/register\",component:Register}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/news\",component:News}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/emailverification\",component:VerifyEmail}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/forgot\",component:ForgotPassword}),/*#__PURE__*/React.createElement(Route,{component:PageNotFound})),/*#__PURE__*/React.createElement(ToastContainer,{position:\"bottom-left\",autoClose:5000,hideProgressBar:false}));};var mapDispatchToProps={logOutUser:logOutUser,setCurrentUser:setCurrentUser};export default connect(null,mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/abdulmutaalazhar/Downloads/Quick-Mern-Project-heroku/client/src/components/App.js"],"names":["React","useEffect","Route","Switch","jwt_decode","setAuthToken","HomePage","Header","PageNotFound","Register","Login","ForgotPassword","News","Wallet","ChangePassword","PrivateRoute","ToastContainer","connect","setCurrentUser","logOutUser","PasswordLess","VerifyEmail","Products","Main","Dashboard","Orders","Transactions","Customers","App","localStorage","jwtToken","token","decoded","console","log","currentTime","Date","now","exp","window","location","href","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport HomePage from \"./home/HomePage\";\nimport Header from \"./common/Header\";\nimport PageNotFound from \"./PageNotFound\";\nimport Register from \"./register/Register\";\nimport Login from \"./login/Login\";\nimport ForgotPassword from './forgot/Forgot'\nimport News from \"./news/News\";\nimport Wallet from \"./wallet/Wallet.js\";\nimport ChangePassword from \"./changePassword/ChangePassword\";\nimport PrivateRoute from \"./PrivateRoute\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { connect } from 'react-redux';\nimport { setCurrentUser, logOutUser } from \"../redux/actions/action\";\nimport PasswordLess from '../components/changePassword/PasswordLess'\nimport VerifyEmail from \"./verifyEmail/verifyEmail\";\nimport Products from \"./products/products\";\nimport Main from \"./MainLayout/Main\";\nimport Dashboard from \"./dashboard/Dashboard\";\nimport Orders from \"./orders/Orders\";\nimport Transactions from \"./transactions.js/Transactions\"\nimport Customers from \"./customers/Customers\";\nconst App = ({\n    setCurrentUser,\n    logOutUser\n}) => {\n    useEffect(() => {\n        if (localStorage.jwtToken) {\n            // Set auth token header auth\n            const token = localStorage.jwtToken;\n            setAuthToken(token);\n            // Decode token and get user info and exp\n            const decoded = jwt_decode(token);\n            console.log(decoded);\n            // Set user and isAuthenticated\n            setCurrentUser(decoded);\n            // Check for expired token\n            const currentTime = Date.now() / 1000; // to get in milliseconds\n            if (decoded.exp < currentTime) {\n                console.log(\"true\");\n                logOutUser();\n                window.location.href = \"/login\";\n            }\n        }\n    }, [setCurrentUser, logOutUser]);\n    return (\n        <>\n            <Switch>\n                <Route exact path=\"/\" component={Login} />\n                <PrivateRoute  path=\"/dashboard\" component={Dashboard} />\n                <PrivateRoute path=\"/customers\" component={Customers} />\n          \n                <PrivateRoute  path=\"/orders\" component={Orders} />\n                <PrivateRoute  path=\"/wallet\" component={Transactions} />\n                <Route  path=\"/login\" component={Login} />\n                <PrivateRoute exact path=\"/products\" component={Products} />\n                <Route exact path=\"/passwordLess\" component={PasswordLess} />\n                <PrivateRoute exact path=\"/changePassword\" component={ChangePassword} />\n                <Route exact path=\"/register\" component={Register} />\n                <Route exact path=\"/news\" component={News} />\n                <Route exact path=\"/emailverification\" component={VerifyEmail} />\n                <Route exact path=\"/forgot\" component={ForgotPassword} />\n             \n                <Route component={PageNotFound} />\n            </Switch>\n            <ToastContainer\n                position=\"bottom-left\"\n                autoClose={5000}\n                hideProgressBar={false}\n            />\n        </>\n    );\n}\n\nconst mapDispatchToProps = {\n    logOutUser: logOutUser,\n    setCurrentUser: setCurrentUser,\n};\n\nexport default connect(null, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}