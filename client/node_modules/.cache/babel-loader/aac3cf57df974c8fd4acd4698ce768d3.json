{"ast":null,"code":"import _defineProperty from\"/Users/abdulmutaalazhar/Downloads/Quick-Mern-Project-heroku/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/abdulmutaalazhar/Downloads/Quick-Mern-Project-heroku/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/abdulmutaalazhar/Downloads/Quick-Mern-Project-heroku/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Form,Button}from'react-bootstrap';import{connect}from'react-redux';import{logOutUser}from\"../../redux/actions/action\";import Header from'../common/Header';import API from\"../../api/api\";import{toast}from\"react-toastify\";import Swal from'sweetalert2';import jwt_decode from\"jwt-decode\";import Sidebar from\"../common/Sidebar\";function ChangePassword(_ref){var history=_ref.history,logOutUser=_ref.logOutUser;var _useState=useState({password:\"\",confirmPassword:\"\",userId:\"\"}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isActive=_useState6[0],setIsActive=_useState6[1];useEffect(function(){if(localStorage.jwtToken){var token=localStorage.jwtToken;// Decode token and get user info and exp\nvar decoded=jwt_decode(token);setUserData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{userId:decoded.id});});}},[]);function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setUserData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});setErrors(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,\"\"));});}function formIsValid(){var password=userData.password,confirmPassword=userData.confirmPassword;var errors={};if(!password)errors.password=\"*Password is required\";if(!confirmPassword)errors.confirmPassword=\"*Confirm password is required\";setErrors(errors);return Object.keys(errors).length===0;}function handleSave(event){event.preventDefault();if(!formIsValid())return;Swal.fire({title:'Changing Password  ! ',html:'Please wait...',allowEscapeKey:false,allowOutsideClick:false,didOpen:function didOpen(){Swal.showLoading();}});setIsActive(true);API.changePassword(userData).then(function(response){setIsActive(false);Swal.fire({title:'Password Changed !',text:'You Password Has Been Updated Successfully, Please Login Again ! ',icon:'success',confirmButtonText:'OK',confirmButtonColor:'#007bff'}).then(function(){logOutUser();setUserData({password:\"\",confirmPassword:\"\"});history.push(\"/login\");});}).catch(function(err){setIsActive(false);console.log(err.response.data);toast.error();Swal.fire({title:'Failed ! ',text:err.response.data.message,icon:'error',confirmButtonText:'OK',confirmButtonColor:'red'});});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Sidebar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"register-form\"},/*#__PURE__*/React.createElement(\"div\",{id:\"auth\"},/*#__PURE__*/React.createElement(\"div\",{class:\"row h-100 justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{class:\"col-lg-5 col-12\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{id:\"auth-left\",className:\"\"},/*#__PURE__*/React.createElement(\"h1\",{class:\"auth-title\"},\"Password.\"),/*#__PURE__*/React.createElement(\"p\",{class:\"auth-subtitle mb-5\"},\"Change Your Password \"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSave},/*#__PURE__*/React.createElement(\"div\",{class:\"form-group position-relative has-icon-left mb-4\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",disabled:isActive,value:userData.password,onChange:handleChange,class:\"form-control form-control-xl\",name:\"password\",placeholder:\"New Password\"}),/*#__PURE__*/React.createElement(\"div\",{class:\"form-control-icon\"},/*#__PURE__*/React.createElement(\"i\",{class:\"bi bi-shield-lock\"}))),errors.password?/*#__PURE__*/React.createElement(\"div\",{className:\"form-error\"},errors.password):null,/*#__PURE__*/React.createElement(\"div\",{class:\"form-group position-relative has-icon-left mb-4\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",disabled:isActive,value:userData.confirmPassword,onChange:handleChange,class:\"form-control form-control-xl\",name:\"confirmPassword\",placeholder:\"Re-Enter New Password \"}),/*#__PURE__*/React.createElement(\"div\",{class:\"form-control-icon\"},/*#__PURE__*/React.createElement(\"i\",{class:\"bi bi-shield-lock\"}))),errors.password?/*#__PURE__*/React.createElement(\"div\",{className:\"form-error\"},errors.confirmPassword):null,/*#__PURE__*/React.createElement(\"button\",{disabled:isActive,type:\"submit\",class:\"btn btn-primary btn-block btn-lg shadow-lg mt-5\"},\"Update Password\"))))))));}var mapDispatchToProps={logOutUser:logOutUser};var mapStateToProps=function mapStateToProps(state){return{user:state.userReducer.user,isAuthenticated:state.userReducer.isAuthenticated};};export default connect(mapStateToProps,mapDispatchToProps)(ChangePassword);","map":{"version":3,"sources":["/Users/abdulmutaalazhar/Downloads/Quick-Mern-Project-heroku/client/src/components/changePassword/ChangePassword.js"],"names":["React","useEffect","useState","Form","Button","connect","logOutUser","Header","API","toast","Swal","jwt_decode","Sidebar","ChangePassword","history","password","confirmPassword","userId","userData","setUserData","errors","setErrors","isActive","setIsActive","localStorage","jwtToken","token","decoded","prevState","id","handleChange","event","target","name","value","prevData","formIsValid","Object","keys","length","handleSave","preventDefault","fire","title","html","allowEscapeKey","allowOutsideClick","didOpen","showLoading","changePassword","then","response","text","icon","confirmButtonText","confirmButtonColor","push","catch","err","console","log","data","error","message","mapDispatchToProps","mapStateToProps","state","user","userReducer","isAuthenticated"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Form, Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { logOutUser } from \"../../redux/actions/action\";\nimport Header from '../common/Header'\nimport API from \"../../api/api\";\nimport { toast } from \"react-toastify\";\nimport Swal from 'sweetalert2'\nimport jwt_decode from \"jwt-decode\";\nimport Sidebar from \"../common/Sidebar\"\nfunction ChangePassword({ history, logOutUser}) {\n    const [userData, setUserData] = useState({ password: \"\",confirmPassword:\"\",userId:\"\"});\n    const [errors, setErrors] = useState({});\n    const [isActive,setIsActive] = useState(false);\n  \n    useEffect(()=>{\n        if (localStorage.jwtToken) {\n            const token = localStorage.jwtToken;\n            // Decode token and get user info and exp\n            const decoded = jwt_decode(token);    \n            setUserData(prevState => ({\n                ...prevState,\n                userId: decoded.id,\n            }))       \n        }\n    },[])\n    function handleChange(event) {\n        const { name, value } = event.target;\n        setUserData(prevData => ({\n            ...prevData,\n            [name]: value\n        }));\n        setErrors(prevData => ({\n            ...prevData,\n            [name]: \"\"\n        }));\n    }\n    function formIsValid() {\n        const {  password,confirmPassword } = userData;\n        const errors = {};\n  \n        if (!password) errors.password = \"*Password is required\";\n        if (!confirmPassword) errors.confirmPassword = \"*Confirm password is required\"\n        setErrors(errors);\n        return Object.keys(errors).length === 0;\n    }\n\n    function handleSave(event) {\n     \n        event.preventDefault();\n        if (!formIsValid()) return;\n        Swal.fire({\n            title: 'Changing Password  ! ',\n            html: 'Please wait...',\n            allowEscapeKey: false,\n            allowOutsideClick: false,\n            didOpen: () => {\n              Swal.showLoading()\n            }\n          });\n        setIsActive(true)\n        API.changePassword(userData)\n            .then((response) => {\n                setIsActive(false)\n                Swal.fire({\n                    title: 'Password Changed !',\n                    text: 'You Password Has Been Updated Successfully, Please Login Again ! ',\n                    icon: 'success',\n                    confirmButtonText: 'OK',\n                    confirmButtonColor:'#007bff'\n                  }).then(()=>{\n                    logOutUser();\n                    setUserData({password: \"\",confirmPassword:\"\" });\n                    history.push(\"/login\");\n              })\n            })\n            .catch((err) => {\n                setIsActive(false)\n                console.log(err.response.data);\n                toast.error()\n                Swal.fire({\n                    title: 'Failed ! ',\n                    text: err.response.data.message ,\n                    icon: 'error',\n                    confirmButtonText: 'OK',\n                    confirmButtonColor:'red'\n                  })\n            })\n     \n    }\n\n    return (\n        <>\n         <Sidebar />\n        <div className=\"register-form\">\n            \n        <div id=\"auth\">\n        \n        <div class=\"row h-100 justify-content-center\">\n            <div class=\"col-lg-5 col-12\"><br/>\n                <div id=\"auth-left\" className=''>\n               \n                    <h1 class=\"auth-title\">Password.</h1>\n                    <p class=\"auth-subtitle mb-5\">Change Your Password </p>\n        \n                    <form onSubmit={handleSave}>\n                        <div class=\"form-group position-relative has-icon-left mb-4\">\n                            <input type=\"password\"  disabled={isActive} value={userData.password} onChange={handleChange} class=\"form-control form-control-xl\" name=\"password\" placeholder=\"New Password\"/>\n                            <div class=\"form-control-icon\">\n                            <i class=\"bi bi-shield-lock\"></i>\n                            </div>\n                        </div>\n                        {errors.password ? <div className=\"form-error\">{errors.password}</div> : null}\n                        <div class=\"form-group position-relative has-icon-left mb-4\">\n                            <input type=\"password\" disabled={isActive} value={userData.confirmPassword} onChange={handleChange} class=\"form-control form-control-xl\" name=\"confirmPassword\" placeholder=\"Re-Enter New Password \"/>\n                            <div class=\"form-control-icon\">\n                                <i class=\"bi bi-shield-lock\"></i>\n                            </div>\n                        </div>\n                        {errors.password ? <div className=\"form-error\">{errors.confirmPassword}</div> : null}\n                       \n                        <button disabled={isActive} type='submit' class=\"btn btn-primary btn-block btn-lg shadow-lg mt-5\">Update Password</button>\n                    </form>\n                    \n                    \n                </div>\n            </div>\n           \n        </div>\n        \n        </div>\n\n              {/* <br/>\n            <h3>Change Account Password </h3>\n            <hr/>\n            <Form onSubmit={handleSave}>\n                \n           \n            <Form.Group controlId=\"formBasicPassword\">\n                    <Form.Label><b>New Password</b></Form.Label>\n                    <Form.Control\n                        type=\"password\"\n                        placeholder=\"Enter New Password \"\n                        name=\"password\"\n                        value={userData.password}\n                        onChange={handleChange}\n                    />\n                    {errors.password ? <div className=\"form-error\">{errors.password}</div> : null}\n            </Form.Group>\n\n            <Form.Group controlId=\"formBasicConfirmPassword\">\n                <Form.Label><b>Confirm New Password</b></Form.Label>\n                <Form.Control\n                    type=\"password\"\n                    placeholder=\"Re-Enter New Password \"\n                    name=\"confirmPassword\"\n                    value={userData.confirmPassword}\n                    onChange={handleChange}\n                />\n                {errors.confirmPassword ? <div className=\"form-error\">{errors.confirmPassword}</div> : null}\n            </Form.Group>\n               \n              \n               \n                <Button variant=\"primary\" type=\"submit\">\n                   Update Password \n                </Button>\n            </Form>\n            <br/> */}\n          \n        </div>\n        </>\n    )\n}\nconst mapDispatchToProps = {\n    logOutUser: logOutUser,\n};\n\nconst mapStateToProps = (state) => ({\n    user: state.userReducer.user,\n    isAuthenticated: state.userReducer.isAuthenticated,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChangePassword);"]},"metadata":{},"sourceType":"module"}